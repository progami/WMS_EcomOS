# Prisma Directory

This directory contains database schema definitions, migrations, and seed data for the application.

## Files

### schema.prisma
- **Purpose**: Database schema definition using Prisma Schema Language
- **Contents**: 
  - Model definitions (User, SKU, Transaction, Invoice, etc.)
  - Relationships between models
  - Indexes and constraints
  - Enum definitions

### seed.ts
- **Purpose**: Database seeding script for initial data
- **Usage**: `npx prisma db seed`
- **Creates**:
  - Default warehouses (FMC, VGlobal, 4AS)
  - Admin and staff users
  - Initial configuration

## Directories

### migrations/
- **Purpose**: Database migration history
- **Generated by**: `npx prisma migrate dev`
- **Contents**: SQL migration files and migration lock

## Common Commands

```bash
# Generate Prisma Client
npx prisma generate

# Create a new migration
npx prisma migrate dev --name <migration-name>

# Apply migrations to production
npx prisma migrate deploy

# Reset database (CAUTION: Deletes all data)
npx prisma migrate reset

# Seed the database
npx prisma db seed

# Open Prisma Studio (GUI)
npx prisma studio

# Format schema file
npx prisma format
```

## Schema Overview

### Core Models
- **User**: System users with roles (admin, staff, viewer)
- **Warehouse**: Warehouse locations and configurations
- **SKU**: Product/SKU master data
- **Transaction**: Inventory movements (RECEIVE, SHIP, ADJUST)
- **Invoice**: Financial invoices
- **StorageLedger**: Storage cost tracking

### Supporting Models
- **CostRate**: Configurable cost rates
- **WarehouseConfig**: Per-warehouse settings
- **InvoiceItem**: Invoice line items
- **AuditLog**: System audit trail

### Enums
- **UserRole**: admin, staff, viewer
- **TransactionType**: RECEIVE, SHIP, ADJUST_IN, ADJUST_OUT
- **PaymentStatus**: PENDING, PAID, OVERDUE
- **ModeOfTransportation**: SPD, LTL, FTL

## Best Practices

1. **Migrations**: Always review generated SQL before applying
2. **Schema Changes**: Test migrations on a development database first
3. **Indexes**: Add indexes for frequently queried fields
4. **Relations**: Define both sides of relationships
5. **Defaults**: Use database defaults where appropriate
6. **Validation**: Add database constraints for data integrity